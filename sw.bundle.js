self.addEventListener("fetch",(function(e){"GET"===e.request.method&&(new URL(e.request.url).href.startsWith("https://story-api.dicoding.dev/v1/")?e.respondWith(fetch(e.request).then((function(t){if(t.ok){var n=t.clone();caches.open(API_CACHE_NAME).then((function(t){t.put(e.request,n)}))}return t})).catch((function(){return caches.match(e.request).then((function(e){return e||new Response(JSON.stringify({error:!0,message:"Offline: Could not fetch data from API."}),{headers:{"Content-Type":"application/json"},status:503})}))}))):e.respondWith(caches.match(e.request).then((function(t){return t||fetch(e.request).then((function(e){return e})).catch((function(){return console.warn("Failed to fetch: ".concat(e.request.url,". Serving basic offline response.")),new Response("You are offline and the requested resource is not cached.",{status:404,statusText:"Resource not found or offline",headers:{"Content-Type":"text/plain"}})}))}))))}));